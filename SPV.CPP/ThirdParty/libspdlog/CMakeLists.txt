project(libspdlog)

include(ProjectDefaults)
include(ExternalProject)
include(ExternalCMakeArgs)

ExternalProject_Add(
	libspdlog

	PREFIX ${PROJECT_DEPS_BUILD_PREFIX}
	URL "https://github.com/gabime/spdlog/archive/v1.4.2.tar.gz"
	URL_HASH SHA256=821c85b120ad15d87ca2bc44185fa9091409777c756029125a02f81354072157
	DOWNLOAD_NAME "spdlog-v1.4.2.tar.gz"
	DOWNLOAD_DIR ${PROJECT_DEPS_TARBALL_DIR}
	DOWNLOAD_NO_PROGRESS 1

	CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=${PROJECT_INT_DIST_DIR}
		${CMAKE_ARGS_INIT}
		-DSPDLOG_BUILD_TESTS=OFF
		-DSPDLOG_BUILD_SHARED=OFF
		-DSPDLOG_BUILD_EXAMPLE=OFF
		-DSPDLOG_BUILD_EXAMPLE_HO=OFF
		-DSPDLOG_BUILD_TESTS=OFF
		-DSPDLOG_BUILD_TESTS_HO=OFF
		-DCMAKE_BUILD_TYPE=Release
		-DCMAKE_VERBOSE_MAKEFILE=${CMAKE_VERBOSE_MAKEFILE}
)

if(SPV_ENABLE_STATIC)
	export_static_library(spdlog)
endif()