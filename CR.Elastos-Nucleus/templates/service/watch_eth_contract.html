{% extends "service.html" %} 
{% load static %} 

{% block title %}
<title>Watch ETH Contract - Elastos Nucleus</title>
{% endblock title %} 

{% block scripts_services %}
    <script src="{% static '/javascript/watchETHContract.js' %}"></script>
{% endblock scripts_services %}

{% block related_services %}
  <li>
    <a href="#">
      1st Service
    </a>
  </li>
  <li>
    <a href="#">
      2nd Service
    </a>
  </li>
  <li>
    <a href="#">
      3rd Service
    </a>
  </li>
  <li>
    <a href="#">
      4th Service
    </a>
  </li>
  <li>
    <a href="#">
      5th Service
    </a>
  </li>
{% endblock related_services %}

{% block documentation %}
  <li>
    <a href="#">One Example</a>
  </li>
  <li>
    <a href="#">Two Example</a>
  </li>
  <li>
    <a href="#">Red Example</a>
  </li>
  <li>
    <a href="#">Blue Example</a>
  </li>
{% endblock documentation %}

{% block serviceicon %}
    <img src="{% static 'images/common/eth-contract.svg' %}"/>
{% endblock serviceicon %}
{% block servicetitle %}
    Watch ETH Contract
{% endblock servicetitle %}

    api_key = "9A5Fy8jDxsJQSDdU4thLZs9fwDmtVzBU"
    smart_contract_address = "0xdf29327c95b12A37089A6e230d5ce50F23237671"
    smart_contract_name = "HelloWorld"
    smart_contract_code_hash = "QmRCn3tQem7UugGLE7tkchXudp4prqLtDhMRs828mUED34"

{% block description %}
    The Watch ETH Contract service is used to view details about a smart contract that was previously deployed to ETH Sidechain and uploaded to Elastos Hive
    <a href="https://github.com/cyber-republic/elastos-smartweb-service">Elastos Smartweb Service</a>
    services. Here is how it currently works:
    <ul style="margin-left: 15px;">
        <li>
            Takes four arguments:
            <ul style="margin-left: 30px;">
                <li>
                    api_key: This is the API key that is required. This can be generated by first using <a href="{% url 'service:generate_key' %}">Generate API Key Service</a>
                </li>
                <li>
                    smart_contract_address: This is the smart contract code address on ETH Sidechain. You should have gotten this when you first used
                    <a href="{% url 'service:deploy_eth_contract' %}">Deploy ETH Contract Service</a> to deploy your smart contract code
                </li>
                <li>
                    smart_contract_address: This is the name of the smart contract on ETH Sidechain. You should have gotten this when you first used
                    <a href="{% url 'service:deploy_eth_contract' %}">Deploy ETH Contract Service</a> to deploy your smart contract code
                </li>
                <li>
                    smart_contract_code_hash: This is the hash of your encrypted file content on Elastos Hive. You should have gotten this when you first used
                    <a href="{% url 'service:deploy_eth_contract' %}">Upload and Sign Service</a> to deploy your smart contract code
                </li>
            </ul>
        </li>
        <li>
            Elastos Smartweb Service validates whether the passed in API key is valid
        </li>
        <li>
            Elastos Smartweb Service checks whether the user has exceeded their number of API calls for the day. To check the entire list of maximum
            number of API calls allowed per service, check out the settings file
            <a href="https://github.com/cyber-republic/elastos-smartweb-service/blob/master/grpc_adenine/settings.py">here</a>
        </li>
        <li>
            Retrieves the Solidity smart contract code from Elastos Hive
        </li>
        <li>
            Retrieves the Solidity smart contract code details from ETH Sidechain
        </li>
        <li>
            Returns the response with all the appropriate info
        </li>
    </ul>
{% endblock description %}
{%  block grpc_server_url %}
    https://github.com/cyber-republic/elastos-smartweb-service/blob/master/grpc_adenine/implementations/sidechain_eth.py
{% endblock grpc_server_url %}
{%  block grpc_client_url_python %}
    https://github.com/cyber-republic/python-grpc-adenine/blob/master/elastos_adenine/sidechain_eth.py
{% endblock grpc_client_url_python %}
{%  block grpc_client_url_golang %}
    https://github.com/cyber-republic/go-grpc-adenine/blob/master/elastosadenine/sidechain_eth.go
{% endblock grpc_client_url_golang %}
{%  block grpc_client_url_elastOS %}
    #
{% endblock grpc_client_url_elastOS %}

{% block service %}

    {% if output %}
        <h5 class="card-title">Response:</h5>
        <p class="card-text">Smart Contract Address :  {{ contract_address }}</p>
        <p class="card-text">Smart Contract Name :  {{ contract_name }}</p>
        <p class="card-text">Smart Contract Functions :  {{ contract_functions }}</p>
        <p class="card-text">Smart Contract Source :<br>{{ contract_source | linebreaks }}</p>
        <a href="{% url "service:deploy_eth_contract" %}" methods="GET">
        <button class="submit-button">
            Watch Smart Contract Again
        </button>
        </a>
    {% else %}
        <div class="row align-items-center justify-content-center">
            <div class="col-md-12 text-center">
                <p class="form-header">
                    View your smart contract that you deployed to ETH Sidechain
                </p>
            </div>
            <div class="col-md-12">
                <form class="form-group text-center" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    {% for field in form.visible_fields %}
                        <p>
                            <span class="form-field-label">{{ field.label_tag }}</span><br>
                            {{ field }}
                            {% if field.help_text %}
                                <small style="color: grey">{{ field.help_text }}</small>
                            {% endif %}
                            {% for error in field.errors %}
                                <p style="color: red">{{ error }}</p>
                            {% endfor %}
                        </p>
                    {% endfor %}
                    <button class="submit-button" type="submit">Watch Smart Contract<</button>
                </form>
            </div>
        </div>
    {% endif %}
{% endblock service %}
