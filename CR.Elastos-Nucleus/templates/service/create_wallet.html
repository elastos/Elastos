{% extends "service.html" %} 
{% load static %}

{% block title %}
<title>Create Wallet - Elastos Nucleus</title>
{% endblock title %} 

{% block scripts_services %}
{% endblock scripts_services %}

{% block related_services %}
  <li>
    <a href="#">
      1st Service
    </a>
  </li>
  <li>
    <a href="#">
      2nd Service
    </a>
  </li>
  <li>
    <a href="#">
      3rd Service
    </a>
  </li>
  <li>
    <a href="#">
      4th Service
    </a>
  </li>
  <li>
    <a href="#">
      5th Service
    </a>
  </li>
{% endblock related_services %}

{% block documentation %}
  <li>
    <a href="#">One Example</a>
  </li>
  <li>
    <a href="#">Two Example</a>
  </li>
  <li>
    <a href="#">Red Example</a>
  </li>
  <li>
    <a href="#">Blue Example</a>
  </li>
{% endblock documentation %}

{% block serviceicon %}
    <img src="{% static 'images/common/wallet.svg' %}"/>
{% endblock serviceicon %}
{% block servicetitle %}
    Create Wallet
{% endblock servicetitle %} 

{% block description %}
    The Create Wallet service is used to create wallets on Mainchain, DID Sidechain, Token Sidechain and ETH Sidechain with one API call.
    NOTE: This service currently does not support the new DID type with w3c standard. This will be upgraded in the near future. Also, the goal
    in the future is to be able to create all the wallets in all the chains that can be controlled using just one set of mneomonics.
    <a href="https://github.com/cyber-republic/elastos-smartweb-service">Elastos Smartweb Service</a>
    services. Here is how it currently works:
    <ul style="margin-left: 15px;">
        <li>
            Takes one argument:
            <ul style="margin-left: 30px;">
                <li>
                    api_key: This is the API key that is required. This can be generated by first using <a href="{% url 'service:generate_key' %}">Generate API Key Service</a>
                </li>
            </ul>
        </li>
        <li>
            Elastos Smartweb Service validates whether the passed in API key is valid
        </li>
        <li>
            Elastos Smartweb Service checks whether the user has exceeded their number of API calls for the day. To check the entire list of maximum
            number of API calls allowed per service, check out the settings file
            <a href="https://github.com/cyber-republic/elastos-smartweb-service/blob/master/grpc_adenine/settings.py">here</a>
        </li>
        <li>
            Creates a mainchain wallet, DID sidechain wallet with DID, Token sidechain wallet and ETH sidechain wallet
        </li>
        <li>
            Returns the response with all the appropriate info
        </li>
    </ul>
{% endblock description %}
{%  block grpc_server_url %}
    https://github.com/cyber-republic/elastos-smartweb-service/blob/master/grpc_adenine/implementations/wallet.py
{% endblock grpc_server_url %}
{%  block grpc_client_url_python %}
    https://github.com/cyber-republic/python-grpc-adenine/blob/master/elastos_adenine/wallet.py
{% endblock grpc_client_url_python %}
{%  block grpc_client_url_golang %}
    https://github.com/cyber-republic/go-grpc-adenine/blob/master/elastosadenine/wallet.go
{% endblock grpc_client_url_golang %}
{%  block grpc_client_url_elastOS %}
    #
{% endblock grpc_client_url_elastOS %}

{% block service %}
    {% if output %}
        <h5 class="card-title">Response:</h5>
        <p class="card-text">
          Mainchain:<br>
          Mnemonic: {{ wallet_mainchain.mnemonic }}<br>
          Private Key: {{ wallet_mainchain.private_key }}<br>
          Public Key: {{ wallet_mainchain.public_key }}<br>
          Address: {{ wallet_mainchain.address }}
        </p>
        <p class="card-text">
          DID Sidechain:<br>
          Private Key: {{ wallet_did.private_key }}<br>
          Public Key: {{ wallet_did.public_key }}<br>
          Address: {{ wallet_did.address }}<br>
          DID: {{ wallet_did.did }}
        </p>
        <p class="card-text">
          Token Sidechain:<br>
          Mnemonic: {{ wallet_token.mnemonic }}<br>
          Private Key: {{ wallet_token.private_key }}<br>
          Public Key: {{ wallet_token.public_key }}<br>
          Address: {{ wallet_token.address }}
        </p>
        <p class="card-text">
          ETH Sidechain:<br>
          Address: {{ wallet_eth.address }}<br>
          Private Key: {{ wallet_eth.private_key }}
        </p>
        <a href="{% url "service:create_wallet" %}" methods="GET">
            <button class="submit-button">
                Create Wallet Again
            </button>
        </a>
    {% else %}
        <div class="row align-items-center justify-content-center">
            <div class="col-md-12 text-center">
                <p class="form-header">
                    Create a wallet on Mainchain, DID Sidechain, Token Sidechain and ETH Sidechain
                </p>
            </div>
            <div class="col-md-12">
                <form class="form-group text-center" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    {% for field in form.visible_fields %}
                        <p>
                            <span class="form-field-label">{{ field.label_tag }}</span><br>
                            {{ field }}
                            {% if field.help_text %}
                                <small style="color: grey">{{ field.help_text }}</small>
                            {% endif %}
                            {% for error in field.errors %}
                                <p style="color: red">{{ error }}</p>
                            {% endfor %}
                        </p>
                    {% endfor %}
                    <button class="submit-button" type="submit">Create Wallet</button>
                </form>
            </div>
        </div>
    {% endif %}
{% endblock service %}
